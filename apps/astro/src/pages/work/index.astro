---
import { sanityClient } from "sanity:client";

import type { Project } from "@leon/cms/types";

import HomeRailNav from "~/components/common/HomeRailNav.astro";
import RailContainer from "~/components/common/RailContainer";
import RailNav from "~/components/common/RailNav";
import Projects from "~/components/work/Projects";
import Layout from "~/layouts/Layout.astro";

const PROJECTS_QUERY = `*[
  _type == "project"
  && defined(slug.current)
]|order(sortOrder asc)`;

const projects = await sanityClient.fetch<Project[]>(PROJECTS_QUERY);
---

<Layout>
  <HomeRailNav />

  <Projects projects={projects} client:load />

  <RailContainer className="p-0">
    <RailNav className="h-full py-20 pe-20 ps-10" href="/contact"
      >CONTACT</RailNav
    >
  </RailContainer>
</Layout>
